Date.now||(Date.now=function(){return(new Date).getTime()}),Array.prototype.map||(Array.prototype.map=function(t,e){var r,s,o;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),i=n.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),s=new Array(i),o=0;o<i;){var a,c;o in n&&(a=n[o],c=t.call(r,a,o,n),s[o]=c),o++}return s});var Prophet={Message:function(){function t(e,r,s){return this._text=e||"Awesome!",this._id=t.idGen(),this._type="default",this._duration=4e3,this._class=" ",r&&(this.cb=s,"function"==typeof r?this.cb=r:"object"!=typeof r||Array.isArray(r)||(this._type=r.type||this._type,this._id=r.id||this._id,this._duration=r.duration||this._duration,this._class=r.class||this._class)),this.cb="function"==typeof r?r:s,t.Stack[t.Stack.length]=this,this.init(),this}return t.idGen=function(){return Date.now()%1e4},t.clearAll=function(){for(var e=document.querySelectorAll("ul.prophet > li"),r=0,s=e.length;r<s;r++)e[r].classList.remove("prophet-message-active"),t.parent.removeChild(e[r])},t.prototype.init=function(){var e=this;this.cbFired=!1,this.toast=document.createElement("li");var r=this.toast;s=["message "+this._class,this._text],r.className=s[0],r.textContent=s[1],this.stylize(),r.addEventListener("click",function(){r.classList.remove("prophet-message-active"),e.cb&&(e.cb(e._id),e.cbFired=!0),setTimeout(function(){t.parent.removeChild(r)},60)});var s},t.prototype.show=function(){var e=this,r=this.toast;return t.parent.appendChild(this.toast),setTimeout(function(){r.classList.add("prophet-message-active")},10),setTimeout(function(){r.classList.remove("prophet-message-active"),e.cbFired||e.cb&&e.cb(e._id),setTimeout(function(){try{t.parent.removeChild(r)}catch(t){}},30)},this._duration),this},t.prototype.stylize=function(){var e=t.Util.find(t.stylePresets,this._type);e!==-1&&(this.toast.style.backgroundColor=t.stylePresets[e].backgroundColor,this.toast.style.color=t.stylePresets[e].color)},t.Util={find:function(t,e){return t.map(function(t){return t.type}).indexOf(e)},toDash:function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}},t.Dbg={stackTrace:function(){return console.dir(t.Stack)},presets:function(){return console.dir(t.stylePresets)}},t.parent=document.getElementsByClassName("prophet")[0],t.stylePresets=[{type:"default",backgroundColor:"#1c2e2d",color:"#FAFAFA"},{type:"success",backgroundColor:"#4daf7c",color:"#FAFAFA"},{type:"error",backgroundColor:"#D45A43",color:"#FAFAFA"}],t.Stack=[],t}()};angular.module("ngProphet",[]).provider("$message",function(){var t=Prophet.Message;return{types:function(e){e=[].concat(e);for(var r,s=0,o=e.length;s<o;s++){var n=t.Util.find(t.stylePresets,e[s].type);if(r=e[s],n!==-1)for(var i in r)t.stylePresets[n][i]=r[i];else t.stylePresets[t.stylePresets.length]=r}},$get:function(){return{show:function(e,r,s){return new t(e,r,s).show()}}}}}).directive("prophet",function(){return{restrict:"C"}});